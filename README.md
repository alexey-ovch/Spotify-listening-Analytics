# Анализ данных Spotify и симуляция A/B-тестирования

Этот проект представляет собой комплексный анализ, построенный на публичном датасете песен Spotify. Работа включает в себя полный цикл исследования данных: от первичной очистки и разведочного анализа (EDA) до расчета продуктовых метрик и проведения симуляции A/B-тестирования для проверки гипотез о влиянии ранжирования и длительности треков на вовлеченность пользователей.

## Данные

Проект использует датасет треков Spotify, включающий следующие категории признаков:
- **Метаданные:** ID трека, название, исполнитель, альбом, дата релиза.
- **Плейлисты:** Жанр (`playlist_genre`), поджанр (`playlist_subgenre`), название плейлиста.
- **Аудио-характеристики:** `danceability`, `energy`, `key`, `loudness`, `mode`, `speechiness`, `acousticness`, `instrumentalness`, `liveness`, `valence`, `tempo`.
- **Технические параметры:** Длительность (`duration_ms`), популярность (`track_popularity`).

**Этапы предобработки:**
- Приведение типов данных и гармонизация схемы.
- Удаление дубликатов и явных выбросов.
- Обработка пропущенных значений.
- Создание производных признаков (год/месяц релиза, длительность в минутах).

---

## Разведочный анализ (EDA)

1. **Временной анализ:**
   - Динамика популярности треков по годам выпуска (среднее/медиана).
   - Анализ объема выпускаемого контента по годам.
   - Изменение средней длительности треков по эрам (<1980, 1980–2009, 2010+).

2. **Жанровый анализ:**
   - Распределение мажорных (`major`) и минорных (`minor`) тональностей внутри жанров.
   - Тепловая карта валентности (позитивности трека) в разрезе «жанр × настроение».

3. **Анализ хитов:**
   - Исследование треков с высокой популярностью (≥70) по жанрам, поджанрам и временным эпохам (60–80-е, 80–90-е, 90–00-е и т.д.).

---

## Гипотезы и A/B-тестирование

В проекте реализован сценарий **симуляции эксперимента** для проверки продуктовых гипотез.

### Метрики
Для оценки используются ключевые метрики вовлеченности:
- **Average Listened Time:** Среднее время прослушивания.
- **Completion Rate (CNR):** Отношение прослушанного времени к длительности трека.
- **Early-Skip Rate:** Доля пропусков трека в первые 30 секунд.
- **Hit-Share:** Доля хитов в прослушивании.

### Проверяемые гипотезы
| Гипотеза | Описание |
|----------|----------|
| **G1 (Влияние позиции)** | Размещение треков в топ-слотах рекомендаций (позиции 1–5) значимо повышает метрики вовлеченности по сравнению с позициями 6–10. |
| **G2 (Влияние длительности)** | Среди треков в топ-слотах, длинные композиции (>4 мин) провоцируют увеличение `early-skip rate`. |

### Дизайн эксперимента
- **Рандомизация:** Случайное распределение пользователей (User-level) в контрольную и тестовую группы.
- **Стратификация:** Опциональная балансировка групп по исторической популярности или эре треков.
- **Проверки:** Расчет мощности (Power Analysis) и проведение A/A-тестов для проверки корректности системы сплитования.

### Статистический вывод
Для оценки результатов применяются:
- **Параметрические тесты:** t-тест Уэлча.
- **Непараметрические тесты:** U-тест Манна-Уитни.
- **Бутстреп (Bootstrap):** Построение доверительных интервалов.
- **Коррекция:** Поправка Бенджамини-Хохберга (FDR) для множественной проверки гипотез.
- **CUPED:** Метод снижения дисперсии для повышения чувствительности тестов.

---

## Стек технологий

Проект выполнен на **Python** с использованием следующих библиотек:

- **Обработка данных:** `pandas`, `numpy`
- **Статистика и ML:** `scipy`, `statsmodels`, `scikit-learn` (для стратификации и бутстрепа)
- **Визуализация:** `matplotlib`, `seaborn`
- **Среда выполнения:** Jupyter Notebook
